(function(){var a=this,b=function(){var a=Function.prototype.apply;if(1==arguments.length&&arguments[0].apply==a)return e.apply(this,arguments);if(2==arguments.length&&arguments[0]&&arguments[0][arguments[1]]&&arguments[0][arguments[1]].apply==a)return f.apply(this,arguments);throw new TypeError("Invalid arguments")};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=b),exports.monkey=b):a.monkey=b;var c=Array.prototype.reduce||function(a,b){"use strict";if(null===this||"undefined"==typeof this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof a)throw new TypeError(a+" is not a function");var c,d,e=this.length>>>0,f=!1;for(1<arguments.length&&(d=b,f=!0),c=0;e>c;++c)this.hasOwnProperty(c)&&(f?d=a(d,this[c],c,this):(d=this[c],f=!0));if(!f)throw new TypeError("Reduce of empty array with no initial value");return d},d=function(a,b,c){for(var d=0,e=a.length;e>d;d++)a[d].apply(b,c)},e=function(a,b){var e,f=[],g=[],h=[],i=!1;return e=function(){d(f,this,arguments);var b=a.apply(this,arguments);return d(g,this,arguments),c.call(h,function(a,b){return b(a)},b)},b||(i=!0,b=function(){return e.apply(this,arguments)}),b.before=function(a){return f.push(a),b},b.after=function(a){return g.push(a),b},b.tr=function(a){return h.push(a),b},b.done=function(){return e},i?b:e},f=function(a,b){var c={};return a[b]=e(a[b],c),c}}).call(this);